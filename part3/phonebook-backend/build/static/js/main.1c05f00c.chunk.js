(this["webpackJsonpphonebook-frontend"]=this["webpackJsonpphonebook-frontend"]||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(14),c=t.n(u),l=t(4),o=t(2),i=function(e){var n=e.handleChange;return r.a.createElement("div",null,"Filter by Name:"," ",r.a.createElement("input",{type:"text",onChange:n}))},m=function(e){var n=e.submit,t=e.nameValue,a=e.nameChange,u=e.numberValue,c=e.numberChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"Name:"," ",r.a.createElement("input",{value:t,onChange:a})),r.a.createElement("div",null,"Number:"," ",r.a.createElement("input",{value:u,onChange:c})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Add")))},f=function(e){var n=e.displayNames;return r.a.createElement("section",null,r.a.createElement("h2",null,"Numbers"),r.a.createElement("ul",null,n))},s=function(e){var n=e.message;return null===n[0]?null:"S"===n[1]?r.a.createElement("h2",{className:"notification-success"},n[0]):r.a.createElement("h2",{className:"notification-error"},n[0])},d=t(3),h=t.n(d),b="/api/persons",E=function(){return h.a.get(b).then((function(e){return e.data}))},p=function(e){return h.a.post(b,e).then((function(e){return e.data}))},v=function(e){return h.a.delete("".concat(b,"/").concat(e))},y=function(e,n){return h.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},g=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],u=n[1],c=Object(a.useState)(""),d=Object(o.a)(c,2),h=d[0],b=d[1],g=Object(a.useState)(""),j=Object(o.a)(g,2),C=j[0],O=j[1],w=Object(a.useState)(""),k=Object(o.a)(w,2),N=k[0],S=k[1],T=Object(a.useState)([null,null]),V=Object(o.a)(T,2),x=V[0],A=V[1];Object(a.useEffect)((function(){E().then((function(e){return u(e)}))}),[]);var D=function(){b(""),O(""),S("")},J=function(e){window.confirm("Are you sure you want to delete this entry?")&&v(e).then((function(){u(t.filter((function(n){return n.id!==e})))})).catch((function(){A(["The entry for ".concat(t[e-1].name," has already been deleted from the server"),"E"]),setTimeout((function(){return A([null,null])}),5e3),u(t.filter((function(n){return n.id!==e})))}))},L=""===N.trim()?t.map((function(e){return r.a.createElement("li",{key:e.id},e.name," ","(",e.number," ",")",r.a.createElement("button",{onClick:function(){return J(e.id)}},"Delete"))})):t.filter((function(e){return e.name.toLowerCase().includes(N.toLowerCase())})).map((function(e){return r.a.createElement("li",{key:e.id},e.name," ","(",e.number," ",")",r.a.createElement("button",{onClick:function(){return J(e.id)}},"Delete"))}));return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Phonebook"),r.a.createElement(s,{message:x}),r.a.createElement(i,{handleChange:function(e){return S(e.target.value)}}),r.a.createElement(m,{submit:function(e){if(e.preventDefault(),!(h.trim().length<1||C.trim().length<1)||(alert("Please enter a valid name and number. Neither field can be empty"),D(),0))if(t.filter((function(e){return e.name===h.trim()})).length>0){var n=t.find((function(e){return e.name===h.trim()}));if(C===n.number)alert("This entry already exists"),D();else if(window.confirm("".concat(n.name," is already added to the phonebook. Replace old number with a new one?"))){var a=Object(l.a)(Object(l.a)({},n),{},{number:C});y(n.id,a).then((function(e){u(t.map((function(n){return n.id!==e.id?n:a}))),D(),A(["Entry for ".concat(e.name," succesfully updated!"),"S"]),setTimeout((function(){return A([null,null])}),5e3)})).catch((function(e){A([e.response.data.Error,"E"]),setTimeout((function(){return A([null,null])}),5e3)}))}else D()}else{var r={name:h.trim(),number:C.trim()};p(r).then((function(e){u(t.concat(e)),D(),A(["Entry for ".concat(e.name," succesfully added!"),"S"]),setTimeout((function(){return A([null,null])}),5e3)})).catch((function(e){A([e.response.data.Error,"E"]),setTimeout((function(){return A([null,null])}),5e3)}))}},nameValue:h,nameChange:function(e){return b(e.target.value)},numberValue:C,numberChange:function(e){return O(e.target.value)}}),r.a.createElement(f,{displayNames:L}))};t(37);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.1c05f00c.chunk.js.map